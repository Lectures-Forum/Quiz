const app = document.getElementById("app");

const questions = [
    {
        question: "في النظرية الكلاسيكية، ما هو العامل الذي يؤدي إلى التوظيف الكامل؟",
        options: ["زيادة الضرائب", "تقييد سياسات العرض", "مرونة الأجور والأسعار", "تدخل الحكومة في سوق العمل"],
        answer: 2
    },
    {
        question: "ما هو الدور الذي يلعبه سعر الفائدة في النظرية الاقتصادية الكلاسيكية؟",
        options: ["تشجيع الحكومة على الإنفاق العام", "تحديد قيمة العملة الوطنية", "ضبط مستوى الاستثمار عبر تحفيز الادخار", "زيادة الإنفاق الاستهلاكي"],
        answer: 2
    },
    {
        question: "أي من السياسات التالية تساهم في تحقيق الاستقرار الاقتصادي في النظرية الكلاسيكية؟",
        options: ["تحفيز الإنفاق الحكومي المباشر", "سياسات التخفيض الضريبي على الاستهلاك", "سياسات ضبط الإنتاج والأسعار", "زيادة طباعة النقود"],
        answer: 2
    },
    {
        question: "ما الذي يعتقده الاقتصاديون الكلاسيكيون عن تقلبات الاقتصاد؟",
        options: ["تتوقف فقط بتخفيض أسعار الفائدة", "تؤدي دائمًا إلى الركود", "تتطلب تدخلًا حكوميًا مستمرًا", "تقلبات مؤقتة ذاتية التصحيح"],
        answer: 3
    },   
     {
        question: "وفقًا لنظرية الدخل النسبي، كيف يؤثر الدخل السابق للفرد على مستوى استهلاكه الحالي؟",
        options: ["لا تأثير للدخل السابق على الاستهلاك الحالي", "يؤدي إلى ارتفاع استهلاكه للحفاظ على مستوى معيشة معين", "يؤثر فقط على الميل الحدي للادخار", "يحفز الادخار ويقلل من الاستهلاك"],
        answer: 1
    },
        {
        question: "في النظرية الكينزية، ماذا يحدث إذا زاد الدخل القومي؟",
        options: ["يزيد الاستهلاك ولكن بمعدل أقل من زيادة الدخل", "يبقى الميل الحدي للاستهلاك ثابتًا", "يزيد الميل المتوسط للاستهلاك بشكل مستمر", "يزيد الادخار، ويتناقص الاستهلاك بنفس النسبة"],
        answer: 0
    },  
      {
        question: "أي من الآتي يمثل تفسيرًا لنظرية دورة الحياة في الاستهلاك؟",
        options: ["يعتمد الاستهلاك على الثروة فقط", "يرتبط الاستهلاك بمعدل الفائدة فقط", "يعتمد الاستهلاك على متوسط الدخل المتوقع على مدار الحياة", "يعتمد الاستهلاك على الدخل الحالي فقط"],
        answer: 2
    }, 
       {
        question: "في النظرية الكينزية، إذا كان الميل الحدي للاستهلاك 0.8 والدخل المتاح هو 1000، فما مقدار الاستهلاك المتوقع؟",
        options: ["500", "800", "1000", "200"],
        answer: 1
    },  
      {
        question: "كيف يؤثر ارتفاع سعر الفائدة على الاستثمارات الخاصة؟",
        options: ["يزيد من الميل نحو الاستثمارات الحكومية", "ليس له تأثير على الاستثمارات", "يشجع على المزيد من الاستثمارات", "يقلل من جاذبية الاستثمار بسبب زيادة تكلفة التمويل"],
        answer: 3
    },  
      {
        question: "أي مما يلي يفسر مفهوم الكفاءة الحدية لرأس المال ؟",
        options: ["نسبة الادخار إلى الاستثمار", "نسبة الأرباح السنوية إلى الإنفاق الحكومي", "معدل العائد المطلوب لتبرير الاستثمار", "القدرة على الاستثمار بدون تكلفة"],
        answer: 2
    },  
      {
        question: "في حال كانت تكلفة شراء آلة جديدة تساوي 3000 جنيه والعائد المتوقع منها هو 5000 جنيه خلال ثلاث سنوات، فهل يعتبر هذا الاستثمار مجديًا؟",
        options: ["يعتمد على مستوى الادخار القومي", "يعتمد على تكلفة العمالة فقط", "لا، لأن العائد أقل من سعر الفائدة", "نعم، لأن العائد يتجاوز التكلفة"],
        answer: 3
    },  
      {
        question: "في النظرية الكينزية، كيف يؤثر انخفاض الطلب الكلي على الاستثمار؟",
        options: ["يزيد من الاستثمار بسبب انخفاض الفائدة", "ليس له تأثير على الاستثمار", "يؤدي إلى زيادة الاستثمار لتعويض النقص", "يثبط الاستثمار بسبب توقعات العائد المنخفض"],
        answer: 3
    },  
      {
        question: "كيف تساهم مرونة الأجور والأسعار في نظرية التوازن الكلاسيكي؟",
        options: ["بضمان التوظيف الكامل تلقائيًا", "بتثبيط الإنفاق الاستهلاكي", "بتحفيز الإنفاق الحكومي", "بتقليل مستويات الاستثمار"],
        answer: 0
    },  
      {
        question: "ما هي العوامل التي تساهم في تحديد مستوى الأجور الحقيقية وفقًا للمدرسة الكلاسيكية؟",
        options: ["نسبة الادخار", "الطلب الحكومي على العمل", "الإنتاجية الحدية للعمل", "معدل التضخم فقط"],
        answer: 2
    },  
      {
        question: "كيف يؤثر التوازن في سوق العمل على مستويات الإنتاج؟",
        options: ["يضمن الإنتاج في أقصى طاقة ممكنة", "يؤدي إلى انخفاض الاستثمارات", "يزيد من معدل البطالة", "يتسبب في ارتفاع مستمر للأسعار"],
        answer: 0
    },  
      {
        question: "في سياق نظرية دورة الحياة، ما الذي يتوقعه الفرد في منتصف العمر بخصوص الادخار والاستهلاك؟",
        options: ["الحفاظ على نفس مستوى الإنفاق بلا تغيير", "تقليل الدخل لزيادة الاستهلاك", "زيادة في مستوى الاستهلاك بشكل متزايد", "توفير أقصى قدر ممكن من المدخرات"],
        answer: 3
    },   
     {
        question: "وفقاً للتحليل الكينزي، ماذا يحدث إذا تزايد معدل الفائدة؟",
        options: ["يقلل من الميل الحدي للاستهلاك فقط", "لا يتأثر الاستهلاك أو الادخار", "يرتفع الاستهلاك وينخفض الادخار", "يزيد الادخار وينخفض الاستهلاك"],
        answer: 3
    },  
      {
        question: "من العوامل التالية يؤثر بشكل مباشر على سلوك الاستهلاك وفقًا لنظرية الدخل الدائم؟",
        options: ["الدخل السنوي المتغير", "توقعات الدخل المستقبلي الثابت", "التغيرات الموسمية في الأسعار", "الدخل العابر للأفراد"],
        answer: 1
    },  
      {
        question: "كيف تؤثر زيادة الطلب الكلي على مستويات الاستثمار في نظرية المعجل؟",
        options: ["يؤدي إلى زيادة المدخرات بدل الاستثمار", "يؤدي إلى تقليص الاستثمار لتوفير رأس المال", "لا تأثير على مستوى الاستثمار", "يشجع على زيادة الاستثمار لتلبية الطلب المتزايد"],
        answer: 3
    },  
      {
        question: "ما بين معدل الفائدة والكفاءة الحدية لرأس المال؟",
        options: ["لا توجد علاقة بينهما", "علاقة عكسية حيث يقل الاستثمار بزيادة معدل الفائدة", "علاقة طردية حيث تزداد الكفاءة الحدية بزيادة الفائدة", "علاقة عكسية حيث تزيد الاستثمارات بارتفاع الفائدة"],
        answer: 1
    },  
      {
        question: "ما هي النتيجة الاستثمار عندما يكون معدل العائد المتوقع أقل من سعر الفائدة السائد؟",
        options: ["يتم التركيز على الاستثمارات ذات العائد المنخفض", "يؤدي إلى رفض المشروع الاستثماري", "يتم اللجوء إلى الاقتراض لتغطية النفقات", "يتشجع المستثمرون على زيادة الاستثمار"],
        answer: 1
    },  
      {
        question: "في النظام الكلاسيكي، ما السبب الأساسي للتضخم؟",
        options: ["تدخل الحكومة لزيادة الطلب الكلي", "تراجع الإنتاجية الكلية", "زيادة العرض النقدي بشكل أسرع من العرض الكلي للسلع", "زيادة الأجور"],
        answer: 2
    },  
      {
        question: "ما الدور الذي يلعبه معدل الفائدة في تحقيق التوازن وفقاً للنظرية الكلاسيكية؟",
        options: ["يمنع التغيرات في الطلب الكلي", "ينظم الادخار والاستثمار لتحقيق التوازن", "يعزز التوظيف الكامل", "يزيد من الطلب الاستهلاكي"],
        answer: 1
    },  
      {
        question: "في التحليل الكلاسيكي، كيف يتم تصحيح البطالة الناتجة عن ارتفاع الأجور؟",
        options: ["عن طريق تشجيع النقابات على المطالبة بزيادات في الأجور", "عن طريق زيادة معدلات التضخم", "عن طريق خفض الأجور إلى مستوى التوازن", "عن طريق تقليل الإنفاق الحكومي"],
        answer: 2
    }, 
       {
        question: "ما الذي تنص عليه نظرية الدخل الدائم فيما يتعلق بالاستهلاك طويل الأجل؟",
        options: ["يعتمد فقط على الاستثمارات الفردية", "يرتبط بشكل أساسي بمستوى الادخار في الأجل القصير", "يعتمد على الدخل المتوقع على مدار حياة الفرد", "يعتمد الاستهلاك على الدخل الحالي فقط"],
        answer: 2
    }, 
       {
        question: "تؤثر العوامل النفسية على الميل الحدي للاستهلاك؟",
        options: ["تشجع على الإنفاق بزيادة التفاؤل حول الدخل المستقبلي", "تؤدي إلى زيادة الادخار مع توقع ارتفاع الأسعار", "تزيد الميل للاستهلاك عند استقرار الأسعار", "تقلل الميل للاستهلاك بزيادة الدخل"],
        answer: 0
    }, 
       {
        question: "وفقًا لنظرية الدخل النسبي، كيف يؤثر الدخل السابق على مستوى الاستهلاك؟",
        options: ["يخفض مستوى الاستهلاك للتركيز على الادخار", "يرفع مستوى الاستهلاك للحفاظ على مكانة اجتماعية", "لا يوجد تأثير للدخل السابق", "يؤثر على الادخار فقط"],
        answer: 1
    }, 
       {
        question: "كيف يؤثر معدل الفائدة على دالة الاستهلاك الكينزية؟",
        options: ["يعتمد على معدل التضخم فقط", "يؤدي إلى زيادة الاستهلاك بشكل غير مباشر", "لا يؤثر على الاستهلاك", "زيادة معدل الفائدة يقلل الاستهلاك"],
        answer: 3
    },  
      {
        question: "كيف تؤثر التوقعات الاقتصادية على الكفاءة الحدية لرأس المال؟",
        options: ["لا تؤثر على الكفاءة الحدية", "تقلل الكفاءة الحدية بزيادة المدخرات", "تزيد الكفاءة الحدية بارتفاع أسعار الفائدة", "تقلل الكفاءة الحدية في حال تراجع الطلب المتوقع"],
        answer: 3
    },  
      {
        question: "ما هي الآثار المتوقعة لارتفاع الفائدة على قرارات الشركات الاستثمارية؟",
        options: ["تشجيع الشركات على الاقتراض", "زيادة معدلات الاستهلاك في المجتمع", "تقليل الاستثمار في الأصول ذات العوائد الأقل من سعر الفائدة", "تشجيع الشركات على الاستثمار في أصول عالية المخاطر"],
        answer: 2
    },  
      {
        question: "في سياق نظرية اي يحدث للاستثمار عندما يرتفع الطلب الكلي؟",
        options: ["يؤثر على الكفاءة الحدية لرأس المال فقط", "يزداد الاستثمار لتلبية الطلب المتزايد", "يظل الاستثمار ثابتاً بغض النظر عن التغيرات في الطلب", "ينخفض الاستثمار لتوفير رأس المال"],
        answer: 1
    },  
      {
        question: "كيف تتفاعل الشركات مع تقلبا دالة الاستثمار؟",
        options: ["تتجاهل تأثير المخزون في قرارات الاستثمار", "تزيد المخزون استجابة لزيادة الطلب", "تعتمد على الاقتراض لتغطية تكاليف المخزون", "تخفض المخزون لتحقيق الاستقرار"],
        answer: 1
    },  
      {
        question: "وفقاً للنظرية الكلاسيكية، كيف يتم تعديل الاقتصاد تلقائياً عند حدوث كساد؟",
        options: ["زيادة الاستثمارات الحكومية في البنية التحتية", "انخفاض الأسعار والأجور، مما يعيد التوازن الاقتصادي", "زيادة الادخار من قبل الأفراد", "تدخل الحكومة من خلال الإنفاق العام"],
        answer: 1
    },  
      {
        question: "ما هي وظيفة النقود في النظرية الكلاسيكية؟",
        options: ["تسهيل التجارة كوسيط تبادل دون تأثير على الإنتاج", "تعزيز الإنتاج عن طريق زيادة الطلب", "تقليل قيمة التكاليف الاقتصادية", "تحديد قيمة الأجور"],
        answer: 0
    },  
      {
        question: "كيف تؤدي مرونة الأجور والأسعار إلى التوظيف الكامل في النظام الكلاسيكي؟",
        options: ["تخفيض الأسعار يرفع مستوى التوظيف من خلال تحقيق التوازن بين العرض والطلب", "استقرار الأجور يمنع التضخم", "زيادة الأجور تدعم الاقتصاد الكلي", "تخفيض الأجور يحفز الطلب الكلي"],
        answer: 0
    },  
      {
        question: "ما هي التأثيرات المتوقعة لنظرية الدخل الدائم عند حدوث تغيير مفاجئ في الدخل الحالي؟",
        options: ["ينخفض الميل للاستهلاك تلقائيًا", "سيتحول الاستهلاك إلى الادخار", "سيزيد الاستهلاك بشكل مباشر", "لن يتأثر الاستهلاك بشكل كبير"],
        answer: 3
    },  
      {
        question: "ما الفرق بين دالة الاستهلاك الكينزية ودالة الاستهلاك في نظرية الدخل النسبي؟",
        options: ["الكينزية تعتمد على التوقعات طويلة الأجل", "تعتمد الدخل النسبي على مقارنة دخل الفرد مع الآخرين", "تتوقع الكينزية تأثيرات فورية على الاستهلاك", "تعتمد الكينزية على الدخل النسبي للفرد"],
        answer: 1
    },  
      {
        question: "وفقا لنظرة الدخل النسبي ما الذي يحدث للميل المتوسط للاستهلاك مع زيادة الدخل على المدى الطويل؟",
        options: ["يعتمد على مستوى الادخار فقط", "يتزايد بشكل مباشر", "ينخفض تدريجيًا", "يبقى ثابتاً"],
        answer: 2
    },  
      {
        question: "كيف تؤثر الكفاءة الحدية لرأس المال على قرارات الاستثمار عند تغيير سعر الفائدة؟",
        options: ["تؤدي إلى تقليل الاستثمار عند انخفاض سعر الفائدة", "الكفاءة الحدية لا تتأثر بتغير سعر الفائدة", "سعر الفائدة المنخفض يحفز الكفاءة الحدية مما يشجع الاستثمار", "زيادة سعر الفائدة تؤدي إلى زيادة الكفاءة الحدية"],
        answer: 2
    },  
      {
        question: "في ظل نظرية المعجل، ما هو تأثير ارتفاع الطلب على المنتجات على الاستثمار؟",
        options: ["يقلل من المدخرات اللازمة للاستثمار", "لا يؤثر على الاستثمار", "يحد من الاستثمار لتجنب التضخم", "يزيد من الاستثمار لمواكبة الطلب المتزايد"],
        answer: 3
    },  
      {
        question: "ما الدور الذي تلعبه التوقعات طويلة الأجل في قرارات الاستثمار؟",
        options: ["ترفع مستوى الضرائب على الاستثمارات", "تؤدي إلى خفض مستوى الاستثمار بسبب المخاطر", "تشجع على الاستثمار إذا كانت التوقعات إيجابية", "ترفع من معدلات الادخار على حساب الاستثمار"],
        answer: 2
    },
    {
        question: "ما الذي يحدث للاستثمار عندما تكون الكفاءة رأس المال أقل من معدل الفائدة السائد؟",
        options: ["يتم تنفيذ الاستثمار على الفور", "يزداد الطلب على الاقتراض", "يتم تأجيل قرارات الاستثمار", "يتم جذب المزيد من المستثمرين"],
        answer: 2
    }

];

let currentQuestionIndex = 0;
let score = 0;
let answeredQuestions = new Array(questions.length).fill(false);
let selectedAnswers = new Array(questions.length).fill(null);
let confirmedAnswers = new Array(questions.length).fill(false);

function renderQuestion() {
    const questionData = questions[currentQuestionIndex];
    app.innerHTML = `
        <div class="question">${questionData.question}</div>
        <ul class="options">
            ${questionData.options
                .slice()
                .reverse()
                .map((option, reversedIndex) => {
                    const index = questionData.options.length - 1 - reversedIndex;
                    const isSelected = selectedAnswers[currentQuestionIndex] === index;
                    const isConfirmed = confirmedAnswers[currentQuestionIndex];
                    const buttonClass = isSelected ? 'selected' : '';

                    if (isConfirmed) {
                        if (index === questionData.answer) {
                            return `
                                <li>
                                    <button class="option-button correct" disabled>${option} (صحيحة)</button>
                                </li>
                            `;
                        } else if (isSelected) {
                            return `
                                <li>
                                    <button class="option-button wrong" disabled>${option} (خطأ)</button>
                                </li>
                            `;
                        } else {
                            return `
                                <li>
                                    <button class="option-button" disabled>${option}</button>
                                </li>
                            `;
                        }
                    }

                    return `
                        <li>
                            <button class="option-button ${buttonClass}" 
                                onclick="handleAnswer(${index})">
                                ${option}
                            </button>
                        </li>
                    `;
                })
                .join("")}
        </ul>
        <div class="button-container">
            <button class="nav-button" onclick="prevQuestion()" ${currentQuestionIndex === 0 ? "disabled" : ""}>السابق</button>
            <button class="confirm-button" onclick="confirmAnswer()" ${selectedAnswers[currentQuestionIndex] === null ? "disabled" : ""}>تأكيد</button>
            <button class="nav-button" onclick="nextQuestion()" ${!answeredQuestions[currentQuestionIndex] ? "disabled" : ""}>التالي</button>
        </div>
    `;
}

function handleAnswer(selectedOption) {
    if (answeredQuestions[currentQuestionIndex]) return;

    selectedAnswers[currentQuestionIndex] = selectedOption;
    renderQuestion();
}

function confirmAnswer() {
    if (answeredQuestions[currentQuestionIndex]) return;

    const questionData = questions[currentQuestionIndex];

    if (selectedAnswers[currentQuestionIndex] === questionData.answer) {
        score++;
    }

    confirmedAnswers[currentQuestionIndex] = true;
    answeredQuestions[currentQuestionIndex] = true;
    renderQuestion();
}

function nextQuestion() {
    if (currentQuestionIndex < questions.length - 1) {
        currentQuestionIndex++;
        renderQuestion();
    } else {
        showResults();
    }
}

function prevQuestion() {
    if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        renderQuestion();
    }
}

function showResults() {
    const percentage = ((score / questions.length) * 100).toFixed(2);

    app.innerHTML = `
        <div class="results-message">جهدك المميز قادك إلى هذا الإنجاز العظيم</div>
        <div class="progress-container">
            <div class="progress-bar" style="width: ${percentage}%;">${percentage}%</div>
        </div>
        <button class="retry-button" onclick="restart()">إعادة المحاولة</button>
    `;

    if (percentage == 100) {
        document.getElementById("congratulation-modal").style.display = "flex";
    }
}

function restart() {
    currentQuestionIndex = 0;
    score = 0;
    answeredQuestions.fill(false);
    selectedAnswers.fill(null);
    confirmedAnswers.fill(false);
    renderQuestion();
}

function closeModal() {
    document.getElementById("congratulation-modal").style.display = "none";
}

renderQuestion();
